(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{738:function(e,a,t){Promise.resolve().then(t.bind(t,168))},168:function(e,a,t){"use strict";t.d(a,{default:function(){return r}});var n=t(7437),s=t(2265);function r(){let[e,a]=(0,s.useState)([{id:"1",content:"Ol\xe1! Eu sou a AURA — Assistente de Apoio e Resposta Humanizada. \n\nEstou aqui para te ouvir, acolher e orientar. Voc\xea pode compartilhar comigo o que est\xe1 acontecendo, seus sentimentos ou d\xfavidas. \n\n**Lembre-se:**\n• Suas conversas s\xe3o privadas\n• N\xe3o h\xe1 julgamentos aqui\n• Em emerg\xeancia, ligue 190\n• Central da Mulher: 180\n\nComo posso te apoiar hoje?",sender:"aura",timestamp:new Date}]),[t,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=(0,s.useRef)(null),d=()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{d()},[e]);let c=async()=>{if(!t.trim()||i)return;let e={id:Date.now().toString(),content:t,sender:"user",timestamp:new Date};a(a=>[...a,e]),r(""),o(!0);try{let e=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!e.ok)throw Error("Erro na comunica\xe7\xe3o com o servidor");let n=await e.json(),s={id:(Date.now()+1).toString(),content:n.message,sender:"aura",timestamp:new Date,isEmergency:n.isEmergency,actions:n.actions};a(e=>[...e,s])}catch(t){console.error("Erro ao enviar mensagem:",t);let e={id:(Date.now()+1).toString(),content:"Sinto muito, mas estou enfrentando dificuldades t\xe9cnicas. \n\nSe voc\xea est\xe1 em situa\xe7\xe3o de emerg\xeancia, ligue imediatamente:\n• **Emerg\xeancia: 190**\n• **Central da Mulher: 180**\n\nTente enviar sua mensagem novamente em alguns instantes.",sender:"aura",timestamp:new Date};a(a=>[...a,e])}finally{o(!1)}},m=e=>{window.open("tel:".concat(e),"_self")},u=async()=>{o(!0);try{let e=await fetch("/api/escalate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"Solicita\xe7\xe3o de atendimento humano via chat",urgency:"normal"})}),t=await e.json(),n={id:Date.now().toString(),content:t.message,sender:"aura",timestamp:new Date};a(e=>[...e,n])}catch(t){console.error("Erro ao escalar atendimento:",t);let e={id:Date.now().toString(),content:"N\xe3o foi poss\xedvel conectar com atendente no momento. \n\n**Tente:**\n• Central da Mulher: 180\n• WhatsApp da Central: (61) 99216-1020\n\nSua seguran\xe7a \xe9 prioridade. N\xe3o hesite em ligar se precisar.",sender:"aura",timestamp:new Date};a(a=>[...a,e])}finally{o(!1)}};return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"AURA — Assistente de Apoio"}),(0,n.jsx)("p",{className:"text-sm opacity-90",children:"Aqui para te ouvir e apoiar \uD83D\uDC9C"})]}),(0,n.jsxs)("div",{className:"h-96 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[e.map(e=>(0,n.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,n.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.sender?"bg-blue-500 text-white":e.isEmergency?"bg-red-100 border border-red-300 text-red-800":"bg-white border border-gray-200 text-gray-800"),children:[(0,n.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:e.content}),e.actions&&(0,n.jsx)("div",{className:"mt-3 space-y-2",children:e.actions.map((e,a)=>(0,n.jsx)("button",{onClick:()=>{"call"===e.type&&e.number?m(e.number):"escalate"===e.type&&u()},className:"w-full px-3 py-2 text-sm rounded-md font-medium ".concat("call"===e.type?"bg-red-600 hover:bg-red-700 text-white":"bg-purple-600 hover:bg-purple-700 text-white"),children:e.label},a))}),(0,n.jsx)("div",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),i&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("div",{className:"bg-white border border-gray-200 text-gray-800 max-w-xs lg:max-w-md px-4 py-2 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"AURA est\xe1 digitando..."})]})})}),(0,n.jsx)("div",{ref:l})]}),(0,n.jsxs)("div",{className:"border-t p-4 bg-white",children:[(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("textarea",{value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())},placeholder:"Digite sua mensagem... (pressione Enter para enviar)",disabled:i,className:"flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:2}),(0,n.jsx)("button",{onClick:c,disabled:!t.trim()||i,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:i?"...":"Enviar"})]}),(0,n.jsxs)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["\uD83D\uDEA8 Em caso de emerg\xeancia imediata, ligue ",(0,n.jsx)("strong",{children:"190"})," • Central da Mulher: ",(0,n.jsx)("strong",{children:"180"})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=738)}),_N_E=e.O()}]);